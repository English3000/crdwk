<%= javascript_pack_tag 'application' %>

<% if signed_in? %>
  <script>
    window.currentUser = <%= render(
      "api/sessions/user.json.jbuilder",
      user: current_user, current: true
    ).html_safe %>
  </script>
<% end %>

<script>
  window.user = <%= render(
    "api/sessions/user.json.jbuilder",
    user: @user, current: false
  ).html_safe %>
</script>

<% if !signed_in? %>
  <%= react_component 'AuthHeader', prerender: true %>
<% elsif !current_user.name && @user.id == current_user.id %>
  <%= react_component 'NewUserForm', prerender: true %>
<% end %>

<%= react_component 'Profile', user: {id: @user.id, name: @user.name, email: @user.email}, prerender: true %>
<%= react_component 'Nav', prerender: true, page: 'Profile', signedIn: signed_in? %>

<%= javascript_pack_tag 'bundle' %>
